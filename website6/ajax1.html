<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax 1 - 请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br><br>
	<div id="text"></div>	

	<script>
		//监听button对象
		document.getElementById('button').addEventListener('click',loadText);

		//实现loadText方法
		function loadText() {
			// ajax:asynchronouse javascript and xml
			// 市场流行的 axios 请求,Fetch API请求,prototype请求,NODE请求,API JQuery

			// XMLHttpRequest   客户端->服务器(http,https)  服务器->客户端( );


			// 1.实例化xhr对象
			var xhr = new XMLHttpRequest();
			// console.log(xhr.readyState);
			// console.log(xhr);
			// 2.配置对象信息type(get/post),url/file(地址) asyn(是否异步,同步是一个个来,异步是同时进行)
			xhr.open('GET','sample.txt',true);//true表示异步进行,false同步进行
			// console.log(xhr.readyState);


			// 3.执行回调函数(1)
			// xhr.onload = function() {
			// 	console.log(xhr.readyState);
			// 	//200代表网络跑通的
			// 	if(this.status==200) {
			// 		// console.log(this.responseText);
			// 	}
				
			// }

			//用户引导页面
			xhr.onprogress = function() {
				console.log("加载页面" + this.readyState);
			}

			// 3.执行回调函数(2)
			xhr.onreadystatechange = function() {
				// console.log(xhr.readyState);
				if(this.readyState == 4 && this.status == 200) {
					console.log(xhr.readyState);
					// console.log(this.responseText);
					//插入到dom中
					document.getElementById('text').innerHTML = this.responseText; 
				}					
			}



			// 4.发送请求
			xhr.send();

			/*
			readyState:
				0: 请求未初始化
				1: 服务器连接已建立
				2: 请求已接收
				3: 请求处理中
				4: 请求已完成，且响应已就绪
			网络状态码:
				200: ok
				404: 未找到
			*/













		}
	</script>
</body>
</html>