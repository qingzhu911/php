<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax2 - 请求json数据</title>
</head>
<body>
	<button id="button1">请求单个数据</button>
	<button id="button2">请求所有</button>
	<h1>单个数据</h1>
	<div id="user"></div>
	<h1>多个数据</h1>
	<div id="users"></div>

	<script>
		document.getElementById('button1').addEventListener('click',loadUser);
		document.getElementById('button2').addEventListener('click',loadUsers);

		function loadUser() {
			var xhr = new XMLHttpRequest();

			xhr.open('GET','user.json',true);
			xhr.onload = function() {
				if(this.status == 200) {
					 // console.log(this.responseText);
					 //解析json为对象
					var user = JSON.parse(this.responseText);
					console.log(user.name);

					//定义变量,插入dom文档
					var output = '';
					//es6
					output += `
						<ul>
							<li>ID: ${user.id}</li>
							<li>ID: ${user.name}</li>
							<li>ID: ${user.email}</li>
						</ul>
					`;
					document.getElementById('user').innerHTML = output;
				}
			}

			xhr.send();
		}

		function loadUsers() {
			var xhr = new XMLHttpRequest();

			xhr.open('GET','users.json',true);
			xhr.onload = function() {
				if(this.status == 200) {
					 // console.log(this.responseText);
					 //解析json为对象
					var users = JSON.parse(this.responseText);
					var outputs = '';
					for(var i =0; i < users.length; i++) {
						console.log(users[i].name);
						//es6
						outputs += `
							<ul>
								<li>ID: ${users[i].id}</li>
								<li>ID: ${users[i].name}</li>
								<li>ID: ${users[i].email}</li>
							</ul>
						`;

					}
					document.getElementById('user').innerHTML = outputs;
				}
			}

			xhr.send();
		}
	</script>
</body>
</html>